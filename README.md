# 智能旅行规划工具

一款集成文本输入和语音输入功能的智能旅行规划工具，可根据用户需求生成详细的旅行计划，包含每日行程安排、预算分析和行程概览。


## 功能特点

1. **双输入模式**  
   - 文本输入：手动填写旅行目的地、日期、预算、人数和偏好  
   - 语音输入：通过语音录制旅行需求，自动转换为文字并生成计划  

2. **详细旅行计划**  
   - 按天规划每日行程（景点、活动、时间安排）  
   - 包含交通建议、住宿推荐、餐饮推荐  
   - 提供预算分配建议和实用贴士  

3. **行程概览**  
   - 以树形结构展示每日核心信息（日期、城市、景点、预算、特色）  

4. **预算分析**  
   - 自动计算总预算、人均预算、每日预算  
   - 提供交通、住宿、餐饮、门票的预算分配建议  


## 安装说明

### 前提条件  
- Python 3.8+  
- 麦克风（语音输入功能需要）  


### 安装步骤  

1. 克隆或下载项目代码到本地  
2. 安装依赖库：  
   ```bash
   pip install -r requirements.txt
   ```  
   （依赖包含：PyQt5、openai、pyaudio、websocket-client等）  


## 使用说明
### 0.启动流程
- python pipeline.py
### 1. 基础配置  
- 打开软件后，在「API配置」区域填写：  
  - API密钥：你的OpenAI兼容API密钥（如geekai等平台密钥）  
  - API基础URL：API服务地址（默认已填写：`https://api.geekai.pro/v1`）  


### 2. 文本输入生成计划  
1. 在「旅行信息（文本输入）」区域填写：  
   - 目的地：如“日本东京”  
   - 旅行日期：如“2024-07-15 至 2024-07-20”  
   - 预算(元)：如“10000”  
   - 同行人数：如“3”  
   - 旅行偏好：如“喜欢美食、动漫、带孩子旅行”  
2. 点击「生成旅行计划」按钮，等待AI生成结果  
3. 结果可在「详细旅行计划」标签页查看完整内容，或在「行程概览」标签页查看精简信息  


### 3. 语音输入生成计划  
1. 点击「语音输入」按钮，打开语音识别窗口  
2. 在语音窗口中：  
   - 点击「开始录音」，说出你的旅行需求（如“我想带2个孩子去上海玩3天，预算5000元，喜欢游乐园和美食”）  
   - 点击「停止录音」结束录制  
   - 点击「开始识别」，系统会将语音转换为文字  
3. 识别完成后自动返回主界面，语音内容会显示在「语音输入内容」文本框  
4. 点击「生成旅行计划」按钮，AI将基于语音内容生成计划  


### 4. 其他功能  
- 「清空所有」按钮：清除所有输入内容和生成结果  
- 预算分析：文本输入模式下，生成计划时会自动附加预算分配建议  


## 注意事项  
- 语音输入需确保环境安静，清晰表达旅行需求（包含目的地、时间、人数、预算、偏好等关键信息）  
- API密钥需有效，否则无法生成旅行计划  
- 首次使用语音功能可能需要授权麦克风权限  


## 示例  
输入需求：“计划2024年10月去成都玩4天，2个人，预算8000元，喜欢火锅和大熊猫”  
生成结果将包含：  
- 每日详细行程（如第一天：大熊猫繁育研究基地 → 宽窄巷子 → 锦里夜景）  
- 推荐火锅店、酒店和交通方式  
- 每日预算分配和总预算分析  

## key
sk-0dyTpEsylD3TdFIU8kyYVzHhfN4Uy4ct8btG3zCLERC2Kaia

## api base
https://api.geekai.pro/v1

